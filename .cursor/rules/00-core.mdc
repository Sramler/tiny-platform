---
description: 全局基础规范（始终应用）
alwaysApply: true
---

# 00 全局基础规范

## 适用范围

- 适用于：全仓库

## 禁止（Must Not）

- ❌ 不允许在不明确需求/上下文时直接大改结构或重构。
- ❌ 不允许引入与需求无关的依赖/框架。

## 必须（Must）

- ✅ 不确定时必须写出：假设、风险、默认策略。
- ✅ 修改最小化：只改与需求相关的文件与逻辑。
- ✅ 变更需可回滚：说明回退方案或保持兼容。

## 应该（Should）

- ⚠️ 新增模块/公共能力应配套示例与最小文档。
- ⚠️ 关键逻辑需要可读命名与必要注释（解释“为什么”）。

## 可以（May）

- 💡 在提交说明中写清：变更点 + 验证方式。

## 例外与裁决

- 紧急修复：紧急安全漏洞修复可简化流程，但必须事后补全文档和测试。
- 实验性功能：实验性功能可在独立分支开发，不强制遵循所有规范，但合并前必须符合规范。
- 冲突时：平台特定规则（90+）优先于本规范。

## 示例

### ✅ 正例

```java
// 明确假设和风险
// 假设：用户已登录，session 有效
// 风险：并发修改可能导致数据不一致
// 策略：使用乐观锁 version 字段
public void updateUser(User user) {
    // 实现逻辑
}
```

### ❌ 反例

```java
// 错误：直接大改结构，没有说明原因
public void refactor() {
    // 大量重构代码，没有注释说明为什么
}
```

